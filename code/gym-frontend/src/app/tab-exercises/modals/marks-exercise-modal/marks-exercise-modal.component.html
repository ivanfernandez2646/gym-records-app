<ion-toolbar>
  <ion-title>{{ exercise.name }}</ion-title>
</ion-toolbar>
<div class="container">
  <ion-content class="list-wrapper" [scrollEvents]="true" #listWrapper>
    <ng-container *ngIf="marks$ | async as marks">
      <ion-list
        class="list"
        #listMarks
        [style.height]="marks.length > 0 ? 'fit-content' : '100%'"
      >
        <ng-container *ngIf="!(isLoading$ | async)">
          <ng-container *ngIf="marks.length > 0; else noItems">
            <div *ngFor="let mark of marks$ | async">
              <ion-item-sliding>
                <ion-item-options side="start">
                  <ion-item-option
                    color="danger"
                    expandable
                    (click)="deleteMark($event, mark)"
                  >
                    Delete
                  </ion-item-option>
                </ion-item-options>

                <ion-item
                  class="ion-no-padding"
                  (click)="mark.notes ? showNote($event, mark.notes) : false"
                >
                  <ion-label class="label-date"
                    ><span>{{ mark.date | date: "dd/MM/yyyy" }}</span
                    ><span *ngIf="mark.notes">
                      <ion-icon
                        name="bookmark"
                        color="warning"
                      ></ion-icon> </span
                  ></ion-label>
                  <div class="record-wrap">
                    <ion-badge color="primary">{{ mark.weight }}kg</ion-badge>
                    <ion-badge color="secondary"
                      >{{ mark.serie }}x{{ mark.reps }}</ion-badge
                    >
                    <ion-badge color="tertiary">{{ mark.rir }} RIR</ion-badge>
                  </div>
                </ion-item>
              </ion-item-sliding>
            </div>
          </ng-container>
          <ng-template #noItems>
            <h4 class="no-items">No items. You can start adding one.</h4>
          </ng-template>
        </ng-container>
      </ion-list>
    </ng-container>
  </ion-content>
  <form class="form" (ngSubmit)="formSubmit()" #form="ngForm">
    <div class="form-inputs-container">
      <ion-item class="ion-no-padding">
        <ion-label>Weight <span>*</span></ion-label>
        <ion-input
          type="number"
          [(ngModel)]="mark.weight"
          name="weight"
          required
        ></ion-input>
      </ion-item>
      <ion-item class="ion-no-padding">
        <ion-label>Serie <span>*</span></ion-label>
        <ion-input
          type="number"
          [(ngModel)]="mark.serie"
          name="serie"
          required
        ></ion-input>
      </ion-item>
      <ion-item class="ion-no-padding">
        <ion-label>Reps <span>*</span></ion-label>
        <ion-input
          type="number"
          [(ngModel)]="mark.reps"
          name="reps"
          required
        ></ion-input>
      </ion-item>
      <ion-item class="ion-no-padding">
        <ion-label>RIR <span>*</span></ion-label>
        <ion-input
          type="number"
          [(ngModel)]="mark.rir"
          name="rir"
          required
        ></ion-input>
      </ion-item>
      <ion-item class="ion-no-padding">
        <ion-label>Notes</ion-label>
        <ion-input
          type="text"
          [(ngModel)]="mark.notes"
          name="notes"
        ></ion-input>
      </ion-item>
    </div>
    <ion-button type="submit" expand="block" color="secondary">Add</ion-button>
  </form>
  <div class="buttons-container">
    <ion-button expand="block" (click)="dismiss()">Back</ion-button>
  </div>
</div>
